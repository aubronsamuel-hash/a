# Application

APP_NAME=Coulisses Crew API
APP_ENV=dev
APP_HOST=0.0.0.0
APP_PORT=8001
APP_LOG_LEVEL=info
APP_DEFAULT_PAGE_SIZE=50
APP_MAX_PAGE_SIZE=200
APP_REQUEST_TIMEOUT_SECONDS=15

# Security

JWT_SECRET=changeme-dev
JWT_ALGO=HS256
JWT_TTL_SECONDS=3600
REFRESH_JWT_SECRET=changeme-refresh-dev
REFRESH_JWT_TTL_SECONDS=1209600
CORS_ORIGINS=[http://localhost:3000,http://localhost:5173]

# Admin autoseed

ADMIN_AUTOSEED=true
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123

# DB (par defaut SQLite)

DB_DSN=sqlite:///./cc.db
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=10

# Exemple Postgres local (compose): decommenter pour utiliser Postgres

# DB_DSN=postgresql+psycopg://cc:cc@localhost:5432/ccdb

# Observabilite

REQUEST_ID_HEADER=X-Request-ID
LOG_JSON=true

# Features (comma-separated; inconnues ignorees)

FEATURES_ENABLED="observability,rate-limit,openapi-export"

# Rate limiting
RATE_LIMIT_ENABLE=true
RATE_LIMIT_GLOBAL_MAX=120
RATE_LIMIT_GLOBAL_WINDOW_SECONDS=60
RATE_LIMIT_AUTH_MAX=10
RATE_LIMIT_AUTH_WINDOW_SECONDS=60
RATE_LIMIT_BACKEND=memory
REDIS_URL=redis://localhost:6379/0

# Frontend (SPA)

FRONT_DIST_DIR=

# Operations

MAINTENANCE_MODE=false
MAINTENANCE_RETRY_AFTER_SECONDS=120
READ_ONLY_MODE=false

# Audit

AUDIT_LOG_PATH=audit.jsonl

# Readiness

READINESS_DB_TIMEOUT_SECONDS=2
READINESS_REQUIRE_REDIS=false

# Security Headers

SEC_HEADERS_ENABLE=true
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self'
CSP_STYLE_SRC='self'
CSP_IMG_SRC='self data:'
CSP_FONT_SRC='self data:'
CSP_CONNECT_SRC='self'
CSP_FRAME_SRC='none'

# Ajouter 'unsafe-inline' SEULEMENT si necessaire en dev; preferer nonce

CSP_ALLOW_UNSAFE_INLINE=false

# HSTS

HSTS_ENABLE=false
HSTS_MAX_AGE=15552000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=false

# Referrer-Policy

REFERRER_POLICY='strict-origin-when-cross-origin'

# X-Frame-Options

X_FRAME_OPTIONS='DENY'

# Permissions-Policy (exemple minimal)

PERMISSIONS_POLICY="geolocation=(), microphone=(), camera=()"
